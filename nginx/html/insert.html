<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Record Input</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: white;
            color: black;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid black;
            padding-bottom: 10px;
        }

        .section {
            border: 1px solid black;
            padding: 20px;
            margin-bottom: 20px;
        }

        h2 {
            margin-bottom: 15px;
            border-bottom: 1px solid black;
            padding-bottom: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input[type="date"],
        input[type="time"] {
            width: 100%;
            padding: 8px;
            border: 1px solid black;
            font-size: 14px;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        button {
            width: 100%;
            padding: 12px;
            background: black;
            color: white;
            border: 1px solid black;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        button:hover {
            background: white;
            color: black;
        }

        .message {
            padding: 10px;
            border: 1px solid black;
            margin-bottom: 15px;
            text-align: center;
            display: none;
        }

        .message.show {
            display: block;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Health Record Input</h1>

    <div class="section">
        <h2>Smoking</h2>
        <div id="smokingMessage" class="message"></div>
        <form onsubmit="saveSmoking(event)">
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="smokingDate" required>
            </div>
            <div class="form-group">
                <label>Smoking</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="smokingSmoke">
                    <span>Smoked</span>
                </div>
            </div>
            <button type="submit">Save</button>
        </form>
    </div>

    <div class="section">
        <h2>Sleep</h2>
        <div id="sleepMessage" class="message"></div>
        <form onsubmit="saveSleep(event)">
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="sleepDate" required>
            </div>
            <div class="form-group">
                <label>Sleep Time</label>
                <input type="time" id="sleepTime" required>
            </div>
            <div class="form-group">
                <label>Wake Time</label>
                <input type="time" id="wakeTime" required>
            </div>
            <button type="submit">Save</button>
        </form>
    </div>

    <div class="section">
        <h2>Caffeine</h2>
        <div id="caffeineMessage" class="message"></div>
        <form onsubmit="saveCaffeine(event)">
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="caffeineDate" required>
            </div>
            <div class="form-group">
                <label>Caffeine</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="caffeineDrink">
                    <span>Consumed</span>
                </div>
            </div>
            <button type="submit">Save</button>
        </form>
    </div>

    <div class="section">
        <h2>Diet</h2>
        <div id="dietMessage" class="message"></div>
        <form onsubmit="saveDiet(event)">
            <div class="form-group">
                <label>Date</label>
                <input type="date" id="dietDate" required>
            </div>
            <div class="form-group">
                <label>Diet</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="dietDrink">
                    <span>Consumed</span>
                </div>
            </div>
            <button type="submit">Save</button>
        </form>
    </div>
</div>

<script>
    const API_BASE_URL = '';

    function showMessage(elementId, message) {
        const element = document.getElementById(elementId);
        element.textContent = message;
        element.classList.add('show');
        setTimeout(() => {
            element.classList.remove('show');
        }, 3000);
    }

    async function saveSmoking(event) {
        event.preventDefault();

        const date = document.getElementById('smokingDate').value;
        const smoke = document.getElementById('smokingSmoke').checked;

        try {
            const response = await fetch(`${API_BASE_URL}/smoking?smoke=${smoke}&date=${date}`, {
                method: 'POST',
            });

            if (response.ok) {
                showMessage('smokingMessage', 'Saved successfully');
                document.getElementById('smokingSmoke').checked = false;
            } else {
                showMessage('smokingMessage', 'Save failed');
            }
        } catch (error) {
            showMessage('smokingMessage', 'Error: ' + error.message);
        }
    }

    async function saveSleep(event) {
        event.preventDefault();

        const date = document.getElementById('sleepDate').value;
        const sleepTime = document.getElementById('sleepTime').value;
        const wakeTime = document.getElementById('wakeTime').value;

        try {
            const response = await fetch(`${API_BASE_URL}/sleep?date=${date}&sleepTime=${sleepTime}&wakeTime=${wakeTime}`, {
                method: 'POST',
            });

            if (response.ok) {
                showMessage('sleepMessage', 'Saved successfully');
                document.getElementById('sleepTime').value = '';
                document.getElementById('wakeTime').value = '';
            } else {
                showMessage('sleepMessage', 'Save failed');
            }
        } catch (error) {
            showMessage('sleepMessage', 'Error: ' + error.message);
        }
    }

    async function saveCaffeine(event) {
        event.preventDefault();

        const date = document.getElementById('caffeineDate').value;
        const drink = document.getElementById('caffeineDrink').checked;

        try {
            const response = await fetch(`${API_BASE_URL}/caffeine?drink=${drink}&date=${date}`, {
                method: 'POST',
            });

            if (response.ok) {
                showMessage('caffeineMessage', 'Saved successfully');
                document.getElementById('caffeineDrink').checked = false;
            } else {
                showMessage('caffeineMessage', 'Save failed');
            }
        } catch (error) {
            showMessage('caffeineMessage', 'Error: ' + error.message);
        }
    }

    async function saveDiet(event) {
        event.preventDefault();

        const date = document.getElementById('dietDate').value;
        const drink = document.getElementById('dietDrink').checked;

        try {
            const response = await fetch(`${API_BASE_URL}/diet?drink=${drink}&date=${date}`, {
                method: 'POST',
            });

            if (response.ok) {
                showMessage('dietMessage', 'Saved successfully');
                document.getElementById('dietDrink').checked = false;
            } else {
                showMessage('dietMessage', 'Save failed');
            }
        } catch (error) {
            showMessage('dietMessage', 'Error: ' + error.message);
        }
    }

    // Set today's date on page load
    window.addEventListener('DOMContentLoaded', () => {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('smokingDate').value = today;
        document.getElementById('sleepDate').value = today;
        document.getElementById('caffeineDate').value = today;
        document.getElementById('dietDate').value = today;
    });
</script>
</body>
</html>